{"ast":null,"code":"import { ResultValid, RegisterSettings } from \"../../importAll\";\nexport default function RegisterValidation(obj, FOR = \"client\") {\n  let valid = true;\n  let message = {\n    username: '',\n    password: '',\n    email: '',\n    firstName: '',\n    lastName: ''\n  };\n  if (!obj.username) {\n    message.username = \"שם משתמש חסר\";\n    valid = false;\n  } else if (!obj.password) {\n    message.password = \"סיסמה חסרה\";\n    valid = false;\n  } else if (!obj.email) {\n    message.email = \"אימיל חסר\";\n    valid = false;\n  } else {\n    if (obj.username.length > RegisterSettings.username.max) {\n      message.username = \"שם המשתמש ארוך מדי\";\n      valid = false;\n    }\n    if (obj.username.length < RegisterSettings.username.min) {\n      message.username = \"שם המשתמש קצר מדי\";\n      valid = false;\n    }\n    if (obj.password.length < RegisterSettings.password.min) {\n      message.password = \"הסיסמה קצרה מדי\";\n      valid = false;\n    }\n    if (obj.password.length > RegisterSettings.password.max) {\n      message.password = \"הסיסמה ארוכה מדי\";\n      valid = false;\n    }\n    if (obj.email.length < RegisterSettings.email.min) {\n      message.email = \"האימל קצר מדי\";\n      valid = false;\n    }\n    if (obj.email.length > RegisterSettings.email.max) {\n      message.email = \"האימל ארוך מדי\";\n      valid = false;\n    }\n    if (obj.firstName) {\n      if (obj.firstName.length < RegisterSettings.firstName.min) {\n        message.firstName = \"שם פרטי קצר  מדי\";\n        valid = false;\n      }\n      if (obj.firstName.length > RegisterSettings.firstName.max) {\n        message.firstName = \"שם פרטי ארוך  מדי\";\n        valid = false;\n      }\n    }\n    if (obj.lastName) {\n      if (obj.lastName.length < RegisterSettings.lastName.min) {\n        message.lastName = \"שם משפחה קצר  מדי\";\n        valid = false;\n      }\n      if (obj.lastName.length > RegisterSettings.lastName.max) {\n        message.lastName = \"שם משפחה ארוך  מדי\";\n        valid = false;\n      }\n    }\n  }\n  if (FOR = \"server\" && Database) {\n    new Database().QuerySync(`Select username,email from users where username = '${obj.username}'or email='${obj.email}'`).ValidDB(data => {\n      if (data[0].username == obj.username) {\n        message.username = \"שם המשתמש כבר קיים\";\n        message.status = \"no-valid\";\n        valid = false;\n      }\n      if (data[0].email == obj.email) {\n        message.email = \"אימייל כבר קיים\";\n        message.status = \"no-valid\";\n        valid = false;\n      }\n    });\n  }\n  return new ResultValid(message, valid);\n}\n_c = RegisterValidation;\nvar _c;\n$RefreshReg$(_c, \"RegisterValidation\");","map":{"version":3,"names":["ResultValid","RegisterSettings","RegisterValidation","obj","FOR","valid","message","username","password","email","firstName","lastName","length","max","min","Database","QuerySync","ValidDB","data","status","_c","$RefreshReg$"],"sources":["H:/Project/version3/client/src/Server-Client-Shared/Validations/RegisterValidation.ts"],"sourcesContent":["import {ResultValid, myStore,RegisterSettings} from \"../../importAll\";\r\n\r\nexport default function RegisterValidation(obj:IRegister ,FOR:\"server\"|\"client\"= \"client\"){\r\n    let valid = true;\r\n    let message :IRegisterMsgs={\r\n        username  : '',\r\n        password  : '',\r\n        email     : '',\r\n        firstName : '',\r\n        lastName  : '',\r\n    };\r\n\r\n    if(!obj.username )     { message.username = \"שם משתמש חסר\" ; valid=false  }\r\n    else if(!obj.password ){ message.password = \"סיסמה חסרה\"   ; valid=false  }\r\n    else if(!obj.email )   { message.email    = \"אימיל חסר\"    ; valid=false  }\r\n    else\r\n    {\r\n        if(obj.username.length   >  RegisterSettings.username.max   )  {message.username = \"שם המשתמש ארוך מדי\" ; valid=false  }\r\n        if(obj.username.length   <  RegisterSettings.username.min   )  {message.username = \"שם המשתמש קצר מדי\"  ; valid=false  }\r\n        if(obj.password.length   <  RegisterSettings.password.min   )  {message.password = \"הסיסמה קצרה מדי\"    ; valid=false  }\r\n        if(obj.password.length   >  RegisterSettings.password.max   )  {message.password = \"הסיסמה ארוכה מדי\"   ; valid=false  }\r\n        if(obj.email.length      <  RegisterSettings.email.min      )  {message.email    = \"האימל קצר מדי\"      ; valid=false  }\r\n        if(obj.email.length      >  RegisterSettings.email.max      )  {message.email    = \"האימל ארוך מדי\"     ; valid=false  }\r\n        if(obj.firstName){\r\n            if(obj.firstName.length  <  RegisterSettings.firstName.min  ) { message.firstName = \"שם פרטי קצר  מדי\"  ; valid=false  }\r\n            if(obj.firstName.length  >  RegisterSettings.firstName.max  ) { message.firstName = \"שם פרטי ארוך  מדי\" ; valid=false  }\r\n        }\r\n        if(obj.lastName){\r\n            if(obj.lastName.length   <  RegisterSettings.lastName.min   )  {message.lastName = \"שם משפחה קצר  מדי\"  ; valid=false  }\r\n            if(obj.lastName.length   >  RegisterSettings.lastName.max   )  {message.lastName = \"שם משפחה ארוך  מדי\" ; valid=false  }\r\n        }\r\n    }\r\n    if(FOR=\"server\" && Database){\r\n        new Database().QuerySync(`Select username,email from users where username = '${obj.username}'or email='${obj.email}'`)\r\n        .ValidDB(data=>{\r\n            if(data[0].username == obj.username){\r\n                message.username = \"שם המשתמש כבר קיים\"\r\n                message.status=\"no-valid\";\r\n                valid=false;\r\n            }\r\n            if(data[0].email == obj.email){\r\n                message.email = \"אימייל כבר קיים\";\r\n                message.status=\"no-valid\";\r\n                valid=false;\r\n            }\r\n        })\r\n    }\r\n\r\n    \r\n    return new ResultValid<IRegisterMsgs>(message,valid);\r\n}\r\n\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}