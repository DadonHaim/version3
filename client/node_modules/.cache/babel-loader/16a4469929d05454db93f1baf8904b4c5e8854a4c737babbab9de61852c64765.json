{"ast":null,"code":"import { socket, UserClient } from \"../importAll\";\nexport function Start_With_Token(store, waiting) {\n  let token = sessionStorage.getItem(\"token\");\n  if (token) socket.emit(\"Start: With-Token\", token);else if (waiting) waiting(true);\n  socket.on(\"Token-Valid\", user => {\n    store.dispatch(store.actions.setIsLogin(true));\n    store.dispatch(store.actions.setUser(user));\n    store.dispatch(store.actions.setSubPage(\"Game-SelectAvatar\"));\n    if (waiting) waiting(true);\n  });\n  socket.on(\"Token-No-Valid\", () => {\n    if (waiting) waiting(true);\n  });\n}\n_c = Start_With_Token;\nexport function Login_Me(store, send, setMsg) {\n  socket.emit('Login: Me', send);\n  socket.on(\"Login-You-Are-Already\", msgs => setMsg(msgs));\n  socket.on(\"Login-No-Valid\", msgs => setMsg(msgs));\n  socket.on(\"Login-You\", user => {\n    UserClient.CreateToken(user.token);\n    store.dispatch(store.actions.setIsLogin(true));\n    store.dispatch(store.actions.setUser(user));\n    store.dispatch(store.actions.setMainPage(\"Game\"));\n  });\n}\n_c2 = Login_Me;\nexport function Register_Me(store, send, setMsg) {\n  socket.emit(\"Register: Me\", send);\n  socket.on(\"Register-Not-Valid\", msgs => setMsg(msgs));\n  socket.on(\"Register-You\", msgs => setMsg(msgs));\n}\n_c3 = Register_Me;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"Start_With_Token\");\n$RefreshReg$(_c2, \"Login_Me\");\n$RefreshReg$(_c3, \"Register_Me\");","map":{"version":3,"names":["socket","UserClient","Start_With_Token","store","waiting","token","sessionStorage","getItem","emit","on","user","dispatch","actions","setIsLogin","setUser","setSubPage","_c","Login_Me","send","setMsg","msgs","CreateToken","setMainPage","_c2","Register_Me","_c3","$RefreshReg$"],"sources":["H:/Project/version3/client/src/Socket/UserSocket.tsx"],"sourcesContent":["import { socket ,UserClient} from \"../importAll\";\r\n\r\nexport function Start_With_Token(store:any,waiting?:any){\r\n    let token = sessionStorage.getItem(\"token\");\r\n    if(token) \r\n        socket.emit<string>(\"Start: With-Token\",token)\r\n    else\r\n        if(waiting)\r\n            waiting(true)\r\n    socket.on<UserClient>(\"Token-Valid\",(user)=>{\r\n        store.dispatch(store.actions.setIsLogin(true));\r\n        store.dispatch(store.actions.setUser(user));\r\n        store.dispatch(store.actions.setSubPage(\"Game-SelectAvatar\"))\r\n        if(waiting)\r\n            waiting(true)\r\n    })\r\n    socket.on(\"Token-No-Valid\",()=>{\r\n        if(waiting)\r\n            waiting(true)\r\n    })\r\n    \r\n}\r\n\r\n\r\nexport function Login_Me(store:any , send:ILogin , setMsg:any){\r\n    socket.emit <ILogin>     ('Login: Me'              , send)\r\n    socket.on   <ILoginMsgs> (\"Login-You-Are-Already\"  , (msgs:ILoginMsgs) =>  setMsg(msgs))\r\n    socket.on   <ILoginMsgs> (\"Login-No-Valid\"         , (msgs:ILoginMsgs) =>  setMsg(msgs))\r\n    socket.on   <UserClient> (\"Login-You\"              , (user:UserClient) =>  {\r\n        UserClient.CreateToken(user.token)\r\n        store.dispatch(store.actions.setIsLogin(true))\r\n        store.dispatch(store.actions.setUser(user))\r\n        store.dispatch(store.actions.setMainPage(\"Game\"))\r\n    })\r\n}\r\n\r\nexport function Register_Me(store:any,send:IRegister,setMsg:any){\r\n    socket.emit <IRegister>     (\"Register: Me\"       ,send);\r\n    socket.on   <IRegisterMsgs> (\"Register-Not-Valid\" ,(msgs:IRegisterMsgs)=>setMsg(msgs))\r\n    socket.on   <IRegisterMsgs> (\"Register-You\"       ,(msgs:IRegisterMsgs)=>setMsg(msgs)) \r\n}\r\n\r\n\r\n"],"mappings":"AAAA,SAASA,MAAM,EAAEC,UAAU,QAAO,cAAc;AAEhD,OAAO,SAASC,gBAAgBA,CAACC,KAAS,EAACC,OAAY,EAAC;EACpD,IAAIC,KAAK,GAAGC,cAAc,CAACC,OAAO,CAAC,OAAO,CAAC;EAC3C,IAAGF,KAAK,EACJL,MAAM,CAACQ,IAAI,CAAS,mBAAmB,EAACH,KAAK,CAAC,MAE9C,IAAGD,OAAO,EACNA,OAAO,CAAC,IAAI,CAAC;EACrBJ,MAAM,CAACS,EAAE,CAAa,aAAa,EAAEC,IAAI,IAAG;IACxCP,KAAK,CAACQ,QAAQ,CAACR,KAAK,CAACS,OAAO,CAACC,UAAU,CAAC,IAAI,CAAC,CAAC;IAC9CV,KAAK,CAACQ,QAAQ,CAACR,KAAK,CAACS,OAAO,CAACE,OAAO,CAACJ,IAAI,CAAC,CAAC;IAC3CP,KAAK,CAACQ,QAAQ,CAACR,KAAK,CAACS,OAAO,CAACG,UAAU,CAAC,mBAAmB,CAAC,CAAC;IAC7D,IAAGX,OAAO,EACNA,OAAO,CAAC,IAAI,CAAC;EACrB,CAAC,CAAC;EACFJ,MAAM,CAACS,EAAE,CAAC,gBAAgB,EAAC,MAAI;IAC3B,IAAGL,OAAO,EACNA,OAAO,CAAC,IAAI,CAAC;EACrB,CAAC,CAAC;AAEN;AAACY,EAAA,GAnBed,gBAAgB;AAsBhC,OAAO,SAASe,QAAQA,CAACd,KAAS,EAAGe,IAAW,EAAGC,MAAU,EAAC;EAC1DnB,MAAM,CAACQ,IAAI,CAAe,WAAW,EAAgBU,IAAI,CAAC;EAC1DlB,MAAM,CAACS,EAAE,CAAiB,uBAAuB,EAAKW,IAAe,IAAMD,MAAM,CAACC,IAAI,CAAC,CAAC;EACxFpB,MAAM,CAACS,EAAE,CAAiB,gBAAgB,EAAYW,IAAe,IAAMD,MAAM,CAACC,IAAI,CAAC,CAAC;EACxFpB,MAAM,CAACS,EAAE,CAAiB,WAAW,EAAiBC,IAAe,IAAM;IACvET,UAAU,CAACoB,WAAW,CAACX,IAAI,CAACL,KAAK,CAAC;IAClCF,KAAK,CAACQ,QAAQ,CAACR,KAAK,CAACS,OAAO,CAACC,UAAU,CAAC,IAAI,CAAC,CAAC;IAC9CV,KAAK,CAACQ,QAAQ,CAACR,KAAK,CAACS,OAAO,CAACE,OAAO,CAACJ,IAAI,CAAC,CAAC;IAC3CP,KAAK,CAACQ,QAAQ,CAACR,KAAK,CAACS,OAAO,CAACU,WAAW,CAAC,MAAM,CAAC,CAAC;EACrD,CAAC,CAAC;AACN;AAACC,GAAA,GAVeN,QAAQ;AAYxB,OAAO,SAASO,WAAWA,CAACrB,KAAS,EAACe,IAAc,EAACC,MAAU,EAAC;EAC5DnB,MAAM,CAACQ,IAAI,CAAkB,cAAc,EAAQU,IAAI,CAAC;EACxDlB,MAAM,CAACS,EAAE,CAAoB,oBAAoB,EAAGW,IAAkB,IAAGD,MAAM,CAACC,IAAI,CAAC,CAAC;EACtFpB,MAAM,CAACS,EAAE,CAAoB,cAAc,EAASW,IAAkB,IAAGD,MAAM,CAACC,IAAI,CAAC,CAAC;AAC1F;AAACK,GAAA,GAJeD,WAAW;AAAA,IAAAR,EAAA,EAAAO,GAAA,EAAAE,GAAA;AAAAC,YAAA,CAAAV,EAAA;AAAAU,YAAA,CAAAH,GAAA;AAAAG,YAAA,CAAAD,GAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}